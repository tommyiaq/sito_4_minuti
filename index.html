<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Animation</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #1a1a1a;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        canvas {
            display: block;
        }
    </style>
</head>
<body>

<canvas id="snakeCanvas"></canvas>

<script>
    const canvas = document.getElementById('snakeCanvas');
    const ctx = canvas.getContext('2d');

    // Dimensioni canvas a tutto schermo
    function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    const gridSize = 20;
    let snake = [];
    const snakeLength = 15;
    
    // Inizializza il serpente
    for (let i = 0; i < snakeLength; i++) {
        snake.push({ x: 100 - i * gridSize, y: 100 });
    }

    let dx = gridSize;
    let dy = 0;
    let nextMove = Date.now();

    function draw() {
        // Effetto scia
        ctx.fillStyle = 'rgba(26, 26, 26, 0.3)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // Disegna serpente
        snake.forEach((part, index) => {
            const hue = (index * 5) % 360;
            ctx.fillStyle = `hsl(${hue}, 80%, 60%)`;
            ctx.beginPath();
            ctx.roundRect(part.x, part.y, gridSize - 2, gridSize - 2, 5);
            ctx.fill();
        });

        // Movimento logico (ogni 100ms)
        if (Date.now() > nextMove) {
            const head = { x: snake[0].x + dx, y: snake[0].y + dy };

            // Attraversamento bordi (Wrap around)
            if (head.x >= canvas.width) head.x = 0;
            if (head.x < 0) head.x = Math.floor(canvas.width / gridSize) * gridSize;
            if (head.y >= canvas.height) head.y = 0;
            if (head.y < 0) head.y = Math.floor(canvas.height / gridSize) * gridSize;

            snake.unshift(head);
            snake.pop();

            // Cambia direzione casualmente
            if (Math.random() < 0.1) {
                const directions = [
                    { x: gridSize, y: 0 },
                    { x: -gridSize, y: 0 },
                    { x: 0, y: gridSize },
                    { x: 0, y: -gridSize }
                ];
                const newDir = directions[Math.floor(Math.random() * directions.length)];
                // Evita di tornare indietro su se stesso
                if (newDir.x !== -dx && newDir.y !== -dy) {
                    dx = newDir.x;
                    dy = newDir.y;
                }
            }
            nextMove = Date.now() + 80;
        }

        requestAnimationFrame(draw);
    }

    draw();
</script>
</body>
</html>